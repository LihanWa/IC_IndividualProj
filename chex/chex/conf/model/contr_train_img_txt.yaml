# -> Stage 1: Detection
defaults:
  - ContrastModel
  - img_encoder: ImageEncoder
  - txt_encoder: ChexzeroTextEncoder

name: contr_train_img_txt
cache_encoded_sentences: true

d_model: 512

act: gelu
attention_dropout: 0.1
dropout: 0.3
droppath_prob: 0.2
layer_scale: true
layer_scale_init: 0.1
n_head: 8

temperature: 0.1

randomize_prompts: true
drop_sentence_prob: 0.0
pathology_neg_prompt_mode: neg

img_encoder:
  unfreeze_last_layer: false
  pretrain: true
  model_type: raddino
  frozen_backbone: true 
  freeze_backbone_layers: 9
  add_cls_features: false 
  use_pretrained_projection: true
  additional_projection_layers: 2
  projection_bn: false
  normalize_projected: false

txt_encoder:
  frozen_language_model: false
  frozen_token_embedding: true
  frozen_positional_embedding: true
  frozen_transformer: true
  freeze_layers: 8
  frozen_ln_final: true
  frozen_text_projection: false
  frozen_projection: false
  n_projection_layers: 1
  projection_bn: false
  normalize_projected: false

